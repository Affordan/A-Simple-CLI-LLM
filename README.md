# Chat CLI - æ™ºèƒ½èŠå¤©å®¢æˆ·ç«¯

ä¸€ä¸ªæ¨¡å—åŒ–çš„æ™ºèƒ½èŠå¤©CLIå·¥å…·ï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
chat-cli/                     # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”œâ”€â”€ main.py                  # ä¸»å…¥å£æ–‡ä»¶ï¼ˆCLIå‘½ä»¤å®šä¹‰ï¼‰
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ backend/                 # åç«¯æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ server.py            # FastAPIæœåŠ¡å™¨
â”œâ”€â”€ frontend/                # å‰ç«¯æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ chat.py              # äº¤äº’å¼èŠå¤©é€»è¾‘
â””â”€â”€ utils/                   # å·¥å…·æ¨¡å—
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ api_client.py        # APIè¯·æ±‚å¤„ç†
    â””â”€â”€ ui.py                # ç•Œé¢æ˜¾ç¤ºåŠŸèƒ½
```

## ğŸš€ å®‰è£…å’Œä½¿ç”¨

### å®‰è£…ä¾èµ–

```bash
cd chat-cli
pip install -e .
```

### ä½¿ç”¨æ–¹æ³•

#### 1. æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```bash
python main.py
# æˆ–è€…
python main.py help
```

#### 2. å¯åŠ¨äº¤äº’å¼èŠå¤©
```bash
python main.py start
```

#### 3. ä½¿ç”¨æŒ‡å®šæ¨¡å‹å¼€å§‹èŠå¤©
```bash
python main.py start --model gpt-4
```

#### 4. ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨
```bash
python main.py server
```

#### 5. ä¸€æ¬¡æ€§é—®ç­”
```bash
python main.py chat "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"
```

### ç¯å¢ƒé…ç½®

ç¡®ä¿è®¾ç½®äº†ç¯å¢ƒå˜é‡ï¼š
```bash
export DEEPSEEK_API_KEY="your_api_key_here"
```

## ğŸ“¦ æ¨¡å—è¯´æ˜

### Backendæ¨¡å— (`backend/`)
- **server.py**: FastAPIåç«¯æœåŠ¡
  - `/chat` - èŠå¤©APIç«¯ç‚¹
  - `/health` - å¥åº·æ£€æŸ¥ç«¯ç‚¹
  - æ”¯æŒæµå¼å“åº”
  - è‡ªåŠ¨é”™è¯¯å¤„ç†

### Frontendæ¨¡å— (`frontend/`)
- **chat.py**: å‰ç«¯äº¤äº’é€»è¾‘
  - `interactive_chat()` - å®Œæ•´èŠå¤©ä¼šè¯
  - `chat_with_prompt()` - å•æ¬¡é—®ç­”
  - `start_server_process()` - æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†

### Utilsæ¨¡å— (`utils/`)
- **api_client.py**: APIé€šä¿¡
  - `send_chat_request()` - å‘é€èŠå¤©è¯·æ±‚
  - `check_server_health()` - æœåŠ¡å™¨çŠ¶æ€æ£€æŸ¥
- **ui.py**: ç”¨æˆ·ç•Œé¢
  - å¸®åŠ©ä¿¡æ¯æ˜¾ç¤º
  - å½©è‰²æ¶ˆæ¯è¾“å‡º
  - ç•Œé¢å¸ƒå±€ç®¡ç†

## ğŸ¨ äº¤äº’å¼å‘½ä»¤

åœ¨èŠå¤©ä¼šè¯ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

- `/help` - æ˜¾ç¤ºå¸®åŠ©
- `/clear` - æ¸…ç©ºèŠå¤©å†å²
- `/model` - åˆ‡æ¢AIæ¨¡å‹
- `/exit` æˆ– `/quit` - é€€å‡ºèŠå¤©

## ğŸ”§ å¼€å‘

### é¡¹ç›®æ¶æ„ä¼˜åŠ¿
1. **æ¨¡å—åŒ–è®¾è®¡**: å‰åç«¯å®Œå…¨åˆ†ç¦»
2. **å¯ç»´æŠ¤æ€§**: èŒè´£æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•
3. **å¯é‡ç”¨æ€§**: å„æ¨¡å—å¯ç‹¬ç«‹ä½¿ç”¨
4. **æ ‡å‡†ç»“æ„**: ç¬¦åˆPythonåŒ…è§„èŒƒ

### æ‰©å±•æŒ‡å—
- æ·»åŠ æ–°çš„AIæ¨¡å‹æ”¯æŒï¼šä¿®æ”¹ `backend/server.py`
- å¢åŠ æ–°çš„CLIå‘½ä»¤ï¼šä¿®æ”¹ `main.py`
- æ”¹è¿›ç”¨æˆ·ç•Œé¢ï¼šä¿®æ”¹ `utils/ui.py`
- æ·»åŠ æ–°çš„APIå®¢æˆ·ç«¯ï¼šæ‰©å±• `utils/api_client.py`

## ğŸ“ ç¤ºä¾‹

```bash
# å¿«é€Ÿå¼€å§‹èŠå¤©
python -m chat-cli.main start

# ä½¿ç”¨ä¸åŒæ¨¡å‹
python -m chat-cli.main start --model deepseek-chat

# å•æ¬¡æé—®
python -m chat-cli.main chat "è§£é‡Šä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "

# åå°è¿è¡ŒæœåŠ¡å™¨
python -m chat-cli.main server --host 0.0.0.0 --port 8080
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. é¦–æ¬¡ä½¿ç”¨å‰è¯·ç¡®ä¿è®¾ç½®äº† `DEEPSEEK_API_KEY` ç¯å¢ƒå˜é‡
2. é»˜è®¤æœåŠ¡å™¨è¿è¡Œåœ¨ `127.0.0.1:8000`
3. ä½¿ç”¨ Ctrl+C å¯ä»¥éšæ—¶é€€å‡ºç¨‹åº
4. èŠå¤©å†å²åœ¨ä¼šè¯æœŸé—´ä¼šä¿æŒï¼Œä½¿ç”¨ `/clear` å¯ä»¥æ¸…ç©º
